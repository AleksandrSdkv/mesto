(()=>{"use strict";var e=document.querySelector(".profile__name"),t=document.querySelector(".profile__about"),n=document.querySelector(".profile__edit-button"),r=document.querySelector(".popup_type_profile"),o=document.querySelector(".element-list"),i=r.querySelector(".form"),a=r.querySelector(".form__input_type_name"),u=r.querySelector(".form__input_type_about"),c=document.querySelector(".popup_type_place"),l=c.querySelector(".form"),s=(c.querySelector(".form__input_type_name"),c.querySelector(".form__input_type_about"),document.querySelector(".popup_type_pic")),f=document.querySelector(".profile__place-button");function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),h(this,"resetVadlidation",(function(){r._inputList.forEach((function(e){return r._hideInputError(e)}))})),h(this,"_setEventListeners",(function(){r.toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValidity(e),r.toggleButtonState()}))}))})),this._config=t,this._formElement=n,this._inputList=Array.from(n.querySelectorAll(t.inputSelector)),this._buttonElement=n.querySelector(t.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_isValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?this._setDisabledButton():this._setEnabledButton()}},{key:"_setDisabledButton",value:function(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_setEnabledButton",value:function(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var m=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t.link,this._name=t.name,this._handleCardClick=n,this._cardTemplate=r}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardTemplate).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this.maskGroupImg=this._element.querySelector(".element__mask-group"),this.maskGroupName=this._element.querySelector(".element__place-name"),this._likeButton=this._element.querySelector(".element__like"),this._btnRemoveCard=this._element.querySelector(".element__btn-remove"),this.maskGroupImg.src=this._link,this.maskGroupName.textContent=this._name,this.maskGroupImg.alt=this._name,this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handleLikeBtnClick()})),this._btnRemoveCard.addEventListener("click",(function(){e._handleTrashBtnClick()})),this.maskGroupImg.addEventListener("click",(function(){e._handleCardClick({name:e._name,link:e._link})}))}},{key:"_handleLikeBtnClick",value:function(){this._likeButton.classList.toggle("element__like_active")}},{key:"_handleTrashBtnClick",value:function(){this._element.remove(),this._element=null}}])&&_(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(t,n){var r=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._functionRender=r,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(e){var t=this;e.forEach((function(e){return t._functionRender(e)}))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&d(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=t,this._handleEscCloseBinded=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscCloseBinded)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscCloseBinded)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&b(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(){return w="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=S(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},w.apply(this,arguments)}function S(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=j(e)););return e}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function C(e,t){if(t&&("object"===k(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function j(e){return j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=j(r);if(o){var n=j(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._popupPhotoTitle=document.querySelector(".popup__caption"),t._popupPhotoImg=document.querySelector(".popup__img"),t}return t=a,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;this._popupPhotoImg.src=n,this._popupPhotoImg.alt=t,this._popupPhotoTitle.textContent=t,w(j(a.prototype),"open",this).call(this)}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(){return q="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=B(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},q.apply(this,arguments)}function B(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function T(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return T(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._popupElement=e,n._handleFormSubmit=t,n._formElement=n._popupElement.querySelector(".form"),n._formInputList=Array.from(n._formElement.querySelectorAll(".form__input")),n}return t=a,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._formInputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;q(V(a.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){q(V(a.prototype),"close",this).call(this),this._formElement.reset()}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(g);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=t,this._userInfo=n,this._avatarSelector=document.querySelector(".profile__avatar")}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._userName.textContent,e.info=this._userInfo.textContent,e}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.info,r=e.avatar;console.log({name:t,info:n,avatar:r}),this._userName.textContent=t,this._userInfo.textContent=n,this._avatarSelector.src=r}}])&&D(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._url=t.url,this._headers=t.headers}var t,n;return t=e,(n=[{key:"getUserData",value:function(){return fetch("".concat(this._url,"/users/me"),{headers:this._headers}).then((function(e){if(e.ok)return e.json()})).catch((function(e){console.log(e)}))}},{key:"getUserCards",value:function(){return fetch("".concat(this._url,"/cards"),{headers:this._headers}).then((function(e){if(e.ok)return e.json()})).catch((function(e){console.log(e)}))}},{key:"setUserData",value:function(e){return fetch("".concat(this._url,"/users/me"),{headers:this._headers,method:"PATCH",body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){if(e.ok)return e.json()}))}},{key:"pushNewCard",value:function(e){return console.log(e),fetch("".concat(this._url,"/cards"),{headers:this._headers,method:"POST",body:JSON.stringify({name:e.place,link:e.url})}).then((function(e){if(e.ok)return e.json()}))}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),A={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__bottom-submit",inactiveButtonClass:"form__bottom-submit_status_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"},F=new y(A,l),J=new y(A,i);function z(e,t){return new m({name:e,link:t},Q,"#card_template").generateCard()}F.enableValidation(),J.enableValidation();var H=new G({url:"https://mesto.nomoreparties.co/v1/cohort-48",headers:{authorization:"25ce2e8c-2a55-4b07-a594-407cca6a6dd7","content-type":"application/json"}}),M=new v({renderer:function(e){var t=z(e.name,e.link);M.addItem(t)}},o);H.getUserCards().then((function(e){return M.renderItems(e)}));var K=new P(s);function Q(e,t){K.open(e,t)}K.setEventListeners();var W=new x(r,(function(e){var t=e.name,n=e.about;console.log({name:t,about:n}),H.setUserData({name:t,about:n}).then((function(e){return X.setUserInfo({name:e.name,info:e.about,avatar:e.avatar})})),W.close()}));W.setEventListeners(),H.getUserData().then((function(e){return X.setUserInfo({name:e.name,info:e.about,avatar:e.avatar})})),n.addEventListener("click",(function(){J.resetVadlidation();var e=X.getUserInfo(),t=e.name,n=e.info;a.value=t,u.value=n,J.toggleButtonState(),W.open()}));var X=new U(e,t),Y=new x(c,(function(e){var t=z(e.place,e.url);M.addItem(t),H.pushNewCard(e),Y.close()}));Y.setEventListeners(),f.addEventListener("click",(function(){F.resetVadlidation(),Y.open(),F.toggleButtonState()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LEVBQWdCUixvQkFLaEI1SSxFQUFtQlUsaUJBQWlCLFNBQVMsV0FDekNxSCxFQUF1Qm1CLG1CQUN2QkUsRUFBZ0JULE9BQ2hCWixFQUF1QnZILG1CQUMxQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmwvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2JsLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9ibC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYmwvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL2JsLy4vc3JjL2NvbXBvbmVudHMvUG9wdXAuanMiLCJ3ZWJwYWNrOi8vYmwvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9ibC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vYmwvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9ibC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly9ibC8uL3NyYy91dGlscy9jb25maWcuanMiLCJ3ZWJwYWNrOi8vYmwvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX25hbWUnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlQWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWJvdXQnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3Byb2ZpbGUnKTtcbmV4cG9ydCBjb25zdCBlbGVtZW50TGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50LWxpc3QnKTtcblxuZXhwb3J0IGNvbnN0IHByb2ZpbGVGb3JtID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG5leHBvcnQgY29uc3QgbmFtZUlucHV0ID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX25hbWUnKTtcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IHByb2ZpbGVQb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXRfdHlwZV9hYm91dCcpO1xuZXhwb3J0IGNvbnN0IG5ld1BsYWNlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9wbGFjZScpO1xuZXhwb3J0IGNvbnN0IGZvcm1OZXdFbGVtZW50ID0gbmV3UGxhY2VQb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybScpO1xuXG5leHBvcnQgY29uc3QgcGxhY2VOYW1lID0gbmV3UGxhY2VQb3B1cC5xdWVyeVNlbGVjdG9yKCcuZm9ybV9faW5wdXRfdHlwZV9uYW1lJyk7XG5leHBvcnQgY29uc3QgcGxhY2VVcmwgPSBuZXdQbGFjZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX2Fib3V0Jyk7XG5cbmV4cG9ydCBjb25zdCBwaWN0dXJlUG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfdHlwZV9waWMnKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlUGxhY2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fcGxhY2UtYnV0dG9uJyk7XG4iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7IC8qKiBAbW9kdWxlINCe0YLQstC10YfQsNC10YIg0LfQsCDQstCw0LvQuNC00LDRhtC40Y4g0YTQvtGA0LzRiyovXG4gICAgY29uc3RydWN0b3IoY29uZmlnLCBmb3JtRWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb25maWcgPSBjb25maWc7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybUVsZW1lbnQ7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgIH07XG5cbiAgICBfaXNWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHsgLy/Qv9GA0Y/Rh9C10YIg0LjQu9C4INC/0L7QutCw0LfRi9Cy0LDQtdGCINC+0YjQuNCx0LrQuCDQsiDQt9Cw0LLQuNGB0LjQvNC+0YHRgtC4INC+0YIg0LLQsNC70LjQtNC90L7RgdGC0Lgg0L/QvtC70LXQuSDQstGL0LfRi9Cy0LDQtdGCINGB0L7QvtGC0LIuINGE0YPQvdC60YbQuNGOXG4gICAgICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICAgICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBfaGFzSW52YWxpZElucHV0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBfc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7IC8vINC/0L7QutCw0LfRi9Cy0LDQtdGCINC+0YjQuNCx0LrQuFxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2NvbmZpZy5lcnJvckNsYXNzKTtcbiAgICB9O1xuXG4gICAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkgeyAvL9C/0YDRj9GH0LXRgiDQvtGI0LjQsdC60LhcbiAgICAgICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgICAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5wdXRFcnJvckNsYXNzKTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcbiAgICB9O1xuXG4gICAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7IC8v0YDQtdCz0YPQu9C40YDRg9C10YIg0YHQvtGB0YLQvtGP0L3QuNC1INC60L3QvtC/0LrQuFxuICAgICAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KCkpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldERpc2FibGVkQnV0dG9uKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRFbmFibGVkQnV0dG9uKClcbiAgICAgICAgfVxuICAgIH1cblxuICAgIF9zZXREaXNhYmxlZEJ1dHRvbigpIHsgLy/RgNC10LPRg9C70LjRgNGD0LXRgiDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4IG9mZlxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBfc2V0RW5hYmxlZEJ1dHRvbigpIHsgLy/RgNC10LPRg9C70LjRgNGD0LXRgiDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4IG9uXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcylcbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xuICAgIH1cblxuICAgIHJlc2V0VmFkbGlkYXRpb24gPSAoKSA9PiB7IC8v0YHQsdGA0LDRgdGL0LLQsNC10YIg0YHQvtGB0YLQvtGP0L3QuNGPINC+0YjQuNCx0L7Quiwg0LjRgdC/0L7Qu9GM0LfRg9C10YLRgdGPINC/0YDQuCDQvtGC0LrRgNGL0YLQuNC4INC/0L7Qv9Cw0L/QvtCyXG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEl0ZW0pID0+IHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0SXRlbSkpO1xuICAgIH1cblxuICAgIF9zZXRFdmVudExpc3RlbmVycyA9ICgpID0+IHsgLy8g0YPRgdGC0LDQvdCw0LLQu9C40LLQstCw0LXRgiDRgdC70YPRiNCw0YLQtdC70LhcbiAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5faXNWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xuICAgICAgICAgICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgZW5hYmxlVmFsaWRhdGlvbigpIHsgLy8g0LLQutC70Y7Rh9Cw0LXRgiDQstCw0LvQuNC00LDRhtC40Y4g0YTQvtGA0LzRi1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICAgIH07XG59OyIsImV4cG9ydCBjbGFzcyBDYXJkIHtcbiAgICBjb25zdHJ1Y3RvcihpdGVtLCBoYW5kbGVDYXJkQ2xpY2ssIGNhcmR0ZW1wbGF0ZSkgeyAvKiogQG1vZHVsZSDQntGC0LLQtdGH0LDQtdGCINC30LAg0LPQtdC90LXRgNCw0YbQuNGOINC60LDRgNGCKi9cbiAgICAgICAgdGhpcy5fbGluayA9IGl0ZW0ubGluaztcbiAgICAgICAgdGhpcy5fbmFtZSA9IGl0ZW0ubmFtZTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgICAgICB0aGlzLl9jYXJkVGVtcGxhdGUgPSBjYXJkdGVtcGxhdGU7XG4gICAgfVxuICAgIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICAgICAgY29uc3QgY2FyZE5ld0VsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRUZW1wbGF0ZSkuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRcIikuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICByZXR1cm4gY2FyZE5ld0VsZW1lbnRcbiAgICB9XG4gICAgZ2VuZXJhdGVDYXJkKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcbiAgICAgICAgdGhpcy5tYXNrR3JvdXBJbWcgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19tYXNrLWdyb3VwJyk7XG4gICAgICAgIHRoaXMubWFza0dyb3VwTmFtZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3BsYWNlLW5hbWUnKTtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UnKTtcbiAgICAgICAgdGhpcy5fYnRuUmVtb3ZlQ2FyZCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2J0bi1yZW1vdmUnKTtcbiAgICAgICAgdGhpcy5tYXNrR3JvdXBJbWcuc3JjID0gdGhpcy5fbGluaztcbiAgICAgICAgdGhpcy5tYXNrR3JvdXBOYW1lLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5tYXNrR3JvdXBJbWcuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKVxuICAgICAgICByZXR1cm4gdGhpcy5fZWxlbWVudFxuICAgIH1cbiAgICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVMaWtlQnRuQ2xpY2soKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuX2J0blJlbW92ZUNhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZVRyYXNoQnRuQ2xpY2soKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMubWFza0dyb3VwSW1nLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2soeyBuYW1lOiB0aGlzLl9uYW1lLCBsaW5rOiB0aGlzLl9saW5rIH0pO1xuICAgICAgICB9KTtcblxuICAgIH1cbiAgICBfaGFuZGxlTGlrZUJ0bkNsaWNrKCkge1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX2xpa2VfYWN0aXZlJyk7XG4gICAgfVxuICAgIF9oYW5kbGVUcmFzaEJ0bkNsaWNrKCkge1xuICAgICAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgICB9XG5cbn1cbiIsImV4cG9ydCBjbGFzcyBTZWN0aW9uIHsgLyoqIEBtb2R1bGUg0LrQu9Cw0YHRgSDQvtGC0YDQuNGB0L7QstC60Lgg0LzQsNGB0YHQuNCy0LAg0LrQsNGA0YLQvtGH0LXQui4gICovXG4gICAgY29uc3RydWN0b3IoeyByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xuXG4gICAgICAgIHRoaXMuX2Z1bmN0aW9uUmVuZGVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKGRhdGEpIHtcblxuICAgICAgICBkYXRhLmZvckVhY2goaXRlbSA9PiB0aGlzLl9mdW5jdGlvblJlbmRlcihpdGVtKSk7XG5cbiAgICB9XG4gICAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xuICAgIH1cbn1cbiIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IHBvcHVwRWxlbWVudDtcbiAgICAgICAgdGhpcy5faGFuZGxlRXNjQ2xvc2VCaW5kZWQgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIH1cbiAgICBvcGVuKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZUJpbmRlZCk7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZUJpbmRlZCk7XG4gICAgfVxuICAgIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcbiAgICAgICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG5cbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpID0+IHtcbiAgICAgICAgICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykgfHwgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UnKSkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxufVxuIiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tICcuL1BvcHVwLmpzJ1xuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7IC8qKiBAbW9kdWxlINCe0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0LrRgNGL0YLQuNC1INC60LDRgNGC0LjQvdC60LgqL1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCkge1xuICAgICAgICBzdXBlcihwb3B1cEVsZW1lbnQpO1xuICAgICAgICB0aGlzLl9wb3B1cFBob3RvVGl0bGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2NhcHRpb24nKTtcbiAgICAgICAgdGhpcy5fcG9wdXBQaG90b0ltZyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nJyk7XG4gICAgfVxuXG4gICAgb3Blbih7IG5hbWUsIGxpbmsgfSkge1xuICAgICAgICB0aGlzLl9wb3B1cFBob3RvSW1nLnNyYyA9IGxpbms7XG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG9JbWcuYWx0ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fcG9wdXBQaG90b1RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgICAgICBzdXBlci5vcGVuKCk7XG4gICAgfVxufSIsImltcG9ydCB7IFBvcHVwIH0gZnJvbSBcIi4vUG9wdXAuanNcIlxuXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHsgLyoqIEBtb2R1bGUg0J7RgtCy0LXRh9Cw0LXRgiDQt9CwINC+0YLQutGA0YvRgtC40LUg0L/QvtC/0LDQv9C+0LIg0YTQvtGA0LwqL1xuICAgIGNvbnN0cnVjdG9yKHBvcHVwRWxlbWVudCwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgICAgICBzdXBlcihwb3B1cEVsZW1lbnQpXG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IHBvcHVwRWxlbWVudDtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dExpc3QgPSBBcnJheS5mcm9tKHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtX19pbnB1dCcpKTtcblxuICAgIH1cbiAgICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcblxuICAgICAgICB0aGlzLl9mb3JtSW5wdXRMaXN0LmZvckVhY2goaW5wdXQgPT4ge1xuICAgICAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8g0LLQvtC30LLRgNCw0YnQsNC10Lwg0L7QsdGK0LXQutGCINC30L3QsNGH0LXQvdC40LlcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XG4gICAgfVxuICAgIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgICAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICAgICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgICAgIH0pXG5cblxuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgc3VwZXIuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQucmVzZXQoKTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFVzZXJJbmZvIHsgLyoqIEBtb2R1bGUg0J/QtdGA0LXQtNCw0LXRgiDQuNC90YTQvtGA0LzQsNGG0LjRjiDQvdCwINGB0YLRgNCw0L3QuNGG0YMgKi9cbiAgICBjb25zdHJ1Y3Rvcih1c2VyTmFtZVNlbGVjdG9yLCB1c2VySW5mb1NlbGVjdG9yKSB7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWVTZWxlY3RvcjtcbiAgICAgICAgdGhpcy5fdXNlckluZm8gPSB1c2VySW5mb1NlbGVjdG9yO1xuICAgICAgICB0aGlzLl9hdmF0YXJTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXInKTtcblxuXG4gICAgfVxuXG4gICAgLy/Qn9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLCDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9CwXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIGNvbnN0IHVzZXJEYXRhID0ge307XG4gICAgICAgIHVzZXJEYXRhLm5hbWUgPSB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudDtcbiAgICAgICAgdXNlckRhdGEuaW5mbyA9IHRoaXMuX3VzZXJJbmZvLnRleHRDb250ZW50O1xuXG4gICAgICAgIHJldHVybiB1c2VyRGF0YTtcbiAgICB9XG5cbiAgICAvL9Cf0YPQsdC70LjRh9C90YvQuSDQvNC10YLQvtC0INC/0YDQuNC90LjQvNCw0LXRgiDQvdC+0LLRi9C1INC00LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0Lgg0LTQvtCx0LDQstC70Y/QtdGCINC40YUg0L3QsCDRgdGC0YDQsNC90LjRhtGDXG4gICAgc2V0VXNlckluZm8oeyBuYW1lLCBpbmZvLCBhdmF0YXIgfSkge1xuICAgICAgICBjb25zb2xlLmxvZyh7IG5hbWUsIGluZm8sIGF2YXRhciB9KVxuICAgICAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgICAgIHRoaXMuX3VzZXJJbmZvLnRleHRDb250ZW50ID0gaW5mbztcbiAgICAgICAgdGhpcy5fYXZhdGFyU2VsZWN0b3Iuc3JjID0gYXZhdGFyO1xuXG4gICAgfVxuXG59XG4iLCJleHBvcnQgY2xhc3MgQXBpIHtcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgICAgIHRoaXMuX3VybCA9IG9wdGlvbnMudXJsO1xuICAgICAgICB0aGlzLl9oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzO1xuXG4gICAgfVxuICAgIGdldFVzZXJEYXRhKCkge1xuXG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L3VzZXJzL21lYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgICAgICB9KTtcblxuICAgIH1cbiAgICBnZXRVc2VyQ2FyZHMoKSB7XG4gICAgICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9L2NhcmRzYCwgeyBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTsgLy8g0LLRi9Cy0LXQtNC10Lwg0L7RiNC40LHQutGDINCyINC60L7QvdGB0L7Qu9GMXG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgc2V0VXNlckRhdGEoZGF0YSkge1xuICAgICAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfS91c2Vycy9tZWAsIHtcbiAgICAgICAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICAgICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLm5hbWUsXG4gICAgICAgICAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXRcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG4gICAgcHVzaE5ld0NhcmQoZm9ybURhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZm9ybURhdGEpXG5cbiAgICAgICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH0vY2FyZHNgLCB7XG4gICAgICAgICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICBuYW1lOiBmb3JtRGF0YS5wbGFjZSxcbiAgICAgICAgICAgICAgICBsaW5rOiBmb3JtRGF0YS51cmxcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pLnRoZW4ocmVzID0+IHtcbiAgICAgICAgICAgIGlmIChyZXMub2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbn1cbiIsImV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gICAgZm9ybVNlbGVjdG9yOiAnLmZvcm0nLFxuICAgIGlucHV0U2VsZWN0b3I6ICcuZm9ybV9faW5wdXQnLFxuICAgIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLmZvcm1fX2JvdHRvbS1zdWJtaXQnLFxuICAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdmb3JtX19ib3R0b20tc3VibWl0X3N0YXR1c19pbmFjdGl2ZScsXG4gICAgaW5wdXRFcnJvckNsYXNzOiAnZm9ybV9faW5wdXRfdHlwZV9lcnJvcicsXG4gICAgZXJyb3JDbGFzczogJ2Zvcm1fX2lucHV0LWVycm9yX2FjdGl2ZScsXG59O1xuZXhwb3J0IGNvbnN0IGFwaUNvbmZpZyA9IHtcbiAgICB1cmw6IFwiaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00OFwiLFxuICAgIGhlYWRlcnM6IHtcbiAgICAgICAgYXV0aG9yaXphdGlvbjogJzI1Y2UyZThjLTJhNTUtNGIwNy1hNTk0LTQwN2NjYTZhNmRkNycsXG4gICAgICAgIFwiY29udGVudC10eXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfVxufTtcbiIsImltcG9ydCAnLi9pbmRleC5jc3MnO1xuaW1wb3J0IHtcblxuICAgIHByb2ZpbGVOYW1lLFxuICAgIHByb2ZpbGVBYm91dCxcbiAgICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgICBwcm9maWxlUG9wdXAsXG4gICAgZWxlbWVudExpc3QsXG4gICAgcHJvZmlsZUZvcm0sXG4gICAgbmFtZUlucHV0LFxuICAgIGpvYklucHV0LFxuICAgIG5ld1BsYWNlUG9wdXAsXG4gICAgZm9ybU5ld0VsZW1lbnQsXG4gICAgcGljdHVyZVBvcHVwLFxuICAgIHByb2ZpbGVQbGFjZUJ1dHRvblxufSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xuXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCB7IENhcmQgfSBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuXG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgeyBBcGkgfSBmcm9tICcuLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgeyBjb25maWcsIGFwaUNvbmZpZyB9IGZyb20gJy4uL3V0aWxzL2NvbmZpZy5qcyc7XG5cblxuXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIC0g0LfQsNC/0YPRgdC60LDQtdGCINCy0LDQu9C40LTQsNGG0LjRji5cbiAqL1xuY29uc3QgdmFsaWRhdGVGb3JtTmV3RWxlbWVudCA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybU5ld0VsZW1lbnQpO1xuY29uc3QgdmFsaWRhdGVQcm9maWxlRm9ybSA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUZvcm0pO1xuXG5cblxudmFsaWRhdGVGb3JtTmV3RWxlbWVudC5lbmFibGVWYWxpZGF0aW9uKCk7XG52YWxpZGF0ZVByb2ZpbGVGb3JtLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAtINGE0YPQvdC60YbQuNGPINGB0L7Qt9C00LDRjtGJ0LDRjyDQs9C+0YLQvtCy0YPRjiDQutCw0YDRgtC+0YfQutGDINGBINC00LDQvdC90YvQvNC4LlxuICovXG5mdW5jdGlvbiBjcmVhdGVDYXJkQ2xhc3MobmFtZSwgbGluaykge1xuICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZCh7XG4gICAgICAgICAgICBuYW1lLFxuICAgICAgICAgICAgbGlua1xuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2ssICcjY2FyZF90ZW1wbGF0ZScpO1xuICAgIGNvbnN0IGNhcmROZXdFbGVtZW50ID0gY2FyZC5nZW5lcmF0ZUNhcmQoKTtcbiAgICByZXR1cm4gY2FyZE5ld0VsZW1lbnRcbn1cbmNvbnN0IGFwaSA9IG5ldyBBcGkoYXBpQ29uZmlnKTtcbi8qKlxuICogQGRlc2NyaXB0aW9uIC0g0LrQu9Cw0YHRgSDQvtGC0YDQuNGB0L7QstC60Lgg0LzQsNGB0YHQuNCy0LAg0LrQsNGA0YLQvtGH0LXQui5cbiAqL1xuXG5jb25zdCBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbGVtZW50ID0gY3JlYXRlQ2FyZENsYXNzKGl0ZW0ubmFtZSwgaXRlbS5saW5rKTtcbiAgICAgICAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oZWxlbWVudCk7XG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBlbGVtZW50TGlzdFxuKTtcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gLSDRhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0Y7RidCw0Y8g0LPQvtGC0L7QstGD0Y4g0LrQsNGA0YLQvtGH0LrRgyDRgSDQtNCw0L3QvdGL0LzQuC5cbiAqL1xuXG5hcGkuZ2V0VXNlckNhcmRzKCkudGhlbihyZXMgPT4gY2FyZExpc3QucmVuZGVySXRlbXMocmVzKSlcblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gLSDQutC70LDRgdGBINC/0L7Qv9Cw0L/QsCDQutCw0YDRgtC40L3QutC4LlxuICovXG5jb25zdCBwb3B1cFBpY2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocGljdHVyZVBvcHVwKVxucG9wdXBQaWNlLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIGhhbmRsZUNhcmRDbGljayhuYW1lLCBsaW5rKSB7XG4gICAgcG9wdXBQaWNlLm9wZW4obmFtZSwgbGluayk7XG59O1xuXG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLyoqXG4gKiBAZGVzY3JpcHRpb24gLSDQv9C+0L/QsNC/INGA0LXQtNCw0LrRgtC40YDQstCw0L3QuNGPINC/0YDQvtGE0LjQu9GPLlxuICovXG5jb25zdCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCA9ICh7IG5hbWUsIGFib3V0IH0pID0+IHtcbiAgICBjb25zb2xlLmxvZyh7IG5hbWUsIGFib3V0IH0pXG4gICAgYXBpLnNldFVzZXJEYXRhKHsgbmFtZTogbmFtZSwgYWJvdXQ6IGFib3V0IH0pXG4gICAgICAgIC50aGVuKGRhdGEgPT4gcHJvZmlsZUluZm8uc2V0VXNlckluZm8oe1xuICAgICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxuICAgICAgICAgICAgaW5mbzogZGF0YS5hYm91dCxcbiAgICAgICAgICAgIGF2YXRhcjogZGF0YS5hdmF0YXJcbiAgICAgICAgfSkpO1xuICAgIHBvcHVwUHJvZmlsZUZvcm0uY2xvc2UoKTtcbn1cblxuXG5jb25zdCBwb3B1cFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZVBvcHVwLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5wb3B1cFByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIC0g0LrQu9Cw0YHRgSDRgdC+0LTQtdGA0LbQuNGCINC80LXRgtC+0LTRiyBBUEkg0LfQsNC/0YDQvtGB0L7QslxuICovXG5cbmFwaS5nZXRVc2VyRGF0YSgpLnRoZW4oZGF0YSA9PiBwcm9maWxlSW5mby5zZXRVc2VySW5mbyh7XG4gICAgLyoqIEBkZXNjcmlwdGlvbiAtINCX0LDQs9GA0YPQt9C60LAg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1INGBINGB0LXRgNCy0LXRgNCwICovXG4gICAgbmFtZTogZGF0YS5uYW1lLFxuICAgIGluZm86IGRhdGEuYWJvdXQsXG4gICAgYXZhdGFyOiBkYXRhLmF2YXRhclxufSkpO1xuXG5cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAtINGB0LvRg9GI0LDRgtC10LvRjCwg0LrQvtGC0L7RgNGL0Lkg0YHQsdGA0LDRgdGL0LLQsNC10YIg0LLQsNC70LjQtNCw0YbQuNGOINGE0L7RgNC80Ysg0L/RgNC+0YTQuNC70Y8g0Lgg0L/QtdGA0LXQvdC+0YHQuNGCINC30L3QsNGH0LXQvdC40Y8g0LIgaW5wdXRzXG4gKi9cbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgIHZhbGlkYXRlUHJvZmlsZUZvcm0ucmVzZXRWYWRsaWRhdGlvbigpO1xuICAgIGNvbnN0IHsgbmFtZSwgaW5mbyB9ID0gcHJvZmlsZUluZm8uZ2V0VXNlckluZm8oKTtcbiAgICBuYW1lSW5wdXQudmFsdWUgPSBuYW1lO1xuICAgIGpvYklucHV0LnZhbHVlID0gaW5mbztcbiAgICB2YWxpZGF0ZVByb2ZpbGVGb3JtLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgcG9wdXBQcm9maWxlRm9ybS5vcGVuKClcbn0pO1xuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAtINGD0L/RgNCw0LLQu9C10L3QuNC1INC+0YLQvtCx0YDQsNC20LXQvdC40LXQvCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LvRjNC30L7QstCw0YLQtdC70LUg0L3QsCDRgdGC0YDQsNC90LjRhtC1LlxuICovXG5jb25zdCBwcm9maWxlSW5mbyA9IG5ldyBVc2VySW5mbyhwcm9maWxlTmFtZSwgcHJvZmlsZUFib3V0KTtcblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAtINC60L7QtCDRgdC+0LfQtNCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCDQuCDRgNCw0LHQvtGC0Ysg0L/QvtC/0LDQv9CwLlxuICovXG5jb25zdCBoYW5kbGVBZGRFbG1Gb3JtID0gKGZvcm1EYXRhKSA9PiB7XG5cbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmRDbGFzcyhmb3JtRGF0YS5wbGFjZSwgZm9ybURhdGEudXJsKTtcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICBhcGkucHVzaE5ld0NhcmQoZm9ybURhdGEpXG4gICAgcG9wdXBOZXdFbGVtZW50LmNsb3NlKClcbn1cblxuY29uc3QgcG9wdXBOZXdFbGVtZW50ID0gbmV3IFBvcHVwV2l0aEZvcm0obmV3UGxhY2VQb3B1cCwgaGFuZGxlQWRkRWxtRm9ybSk7XG5cbnBvcHVwTmV3RWxlbWVudC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5cblxuXG5wcm9maWxlUGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVGb3JtTmV3RWxlbWVudC5yZXNldFZhZGxpZGF0aW9uKCk7XG4gICAgcG9wdXBOZXdFbGVtZW50Lm9wZW4oKVxuICAgIHZhbGlkYXRlRm9ybU5ld0VsZW1lbnQudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pXG4iXSwibmFtZXMiOlsicHJvZmlsZU5hbWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlQWJvdXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVQb3B1cCIsImVsZW1lbnRMaXN0IiwicHJvZmlsZUZvcm0iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsIm5ld1BsYWNlUG9wdXAiLCJmb3JtTmV3RWxlbWVudCIsInBpY3R1cmVQb3B1cCIsInByb2ZpbGVQbGFjZUJ1dHRvbiIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJmb3JFYWNoIiwiaW5wdXRJdGVtIiwiX2hpZGVJbnB1dEVycm9yIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2lzVmFsaWRpdHkiLCJ0aGlzIiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJzb21lIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JDbGFzcyIsInJlbW92ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc2V0RGlzYWJsZWRCdXR0b24iLCJfc2V0RW5hYmxlZEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkNhcmQiLCJpdGVtIiwiaGFuZGxlQ2FyZENsaWNrIiwiY2FyZHRlbXBsYXRlIiwiX2xpbmsiLCJsaW5rIiwiX25hbWUiLCJuYW1lIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJtYXNrR3JvdXBJbWciLCJtYXNrR3JvdXBOYW1lIiwiX2xpa2VCdXR0b24iLCJfYnRuUmVtb3ZlQ2FyZCIsInNyYyIsImFsdCIsIl9oYW5kbGVMaWtlQnRuQ2xpY2siLCJfaGFuZGxlVHJhc2hCdG5DbGljayIsInRvZ2dsZSIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX2Z1bmN0aW9uUmVuZGVyIiwiX2NvbnRhaW5lciIsImRhdGEiLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBFbGVtZW50IiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZUJpbmRlZCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZ0Iiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsIlBvcHVwV2l0aEltYWdlIiwiX3BvcHVwUGhvdG9UaXRsZSIsIl9wb3B1cFBob3RvSW1nIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtSW5wdXRMaXN0IiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJyZXNldCIsIlVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJJbmZvU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckluZm8iLCJfYXZhdGFyU2VsZWN0b3IiLCJ1c2VyRGF0YSIsImluZm8iLCJhdmF0YXIiLCJjb25zb2xlIiwibG9nIiwiQXBpIiwib3B0aW9ucyIsIl91cmwiLCJ1cmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJlcnIiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFib3V0IiwiZm9ybURhdGEiLCJwbGFjZSIsImZvcm1TZWxlY3RvciIsInZhbGlkYXRlRm9ybU5ld0VsZW1lbnQiLCJ2YWxpZGF0ZVByb2ZpbGVGb3JtIiwiY3JlYXRlQ2FyZENsYXNzIiwiZ2VuZXJhdGVDYXJkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImFwaSIsImF1dGhvcml6YXRpb24iLCJjYXJkTGlzdCIsImFkZEl0ZW0iLCJnZXRVc2VyQ2FyZHMiLCJyZW5kZXJJdGVtcyIsInBvcHVwUGljZSIsIm9wZW4iLCJzZXRFdmVudExpc3RlbmVycyIsInBvcHVwUHJvZmlsZUZvcm0iLCJzZXRVc2VyRGF0YSIsInByb2ZpbGVJbmZvIiwic2V0VXNlckluZm8iLCJnZXRVc2VyRGF0YSIsInJlc2V0VmFkbGlkYXRpb24iLCJnZXRVc2VySW5mbyIsInBvcHVwTmV3RWxlbWVudCIsImNhcmRFbGVtZW50IiwicHVzaE5ld0NhcmQiXSwic291cmNlUm9vdCI6IiJ9