(()=>{"use strict";var e=document.querySelector(".profile__name"),t=document.querySelector(".profile__about"),n=document.querySelector(".profile__edit-button"),r=document.querySelector(".popup_type_profile"),o=document.querySelector(".element-list"),i=r.querySelector(".form"),u=r.querySelector(".form__input_type_name"),a=r.querySelector(".form__input_type_about"),s=document.querySelector(".popup_type_place"),l=s.querySelector(".form"),c=(s.querySelector(".form__input_type_name"),s.querySelector(".form__input_type_about"),document.querySelector(".popup_type_pic")),f=document.querySelector(".profile__place-button");function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=function(){function e(t,n){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"resetVadlidation",(function(){r._inputList.forEach((function(e){return r._hideInputError(e)}))})),y(this,"_setEventListeners",(function(){r.toggleButtonState(),r._inputList.forEach((function(e){e.addEventListener("input",(function(){r._isValidity(e),r.toggleButtonState()}))}))})),this._config=t,this._formElement=n,this._inputList=Array.from(n.querySelectorAll(t.inputSelector)),this._buttonElement=n.querySelector(t.submitButtonSelector)}var t,n;return t=e,(n=[{key:"_isValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInvalidInput",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._config.inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._config.errorClass)}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}},{key:"toggleButtonState",value:function(){this._hasInvalidInput()?this._setDisabledButton():this._setEnabledButton()}},{key:"_setDisabledButton",value:function(){this._buttonElement.classList.add(this._config.inactiveButtonClass),this._buttonElement.disabled=!0}},{key:"_setEnabledButton",value:function(){this._buttonElement.classList.remove(this._config.inactiveButtonClass),this._buttonElement.disabled=!1}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&p(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var _=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._link=t.link,this._name=t.name,this._handleCardClick=n,this._cardTemplate=r}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardTemplate).content.querySelector(".element").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this.maskGroupImg=this._element.querySelector(".element__mask-group"),this.maskGroupName=this._element.querySelector(".element__place-name"),this._likeButton=this._element.querySelector(".element__like"),this._btnRemoveCard=this._element.querySelector(".element__btn-remove"),this.maskGroupImg.src=this._link,this.maskGroupName.textContent=this._name,this.maskGroupImg.alt=this._name,this._setEventListeners(),this._element}},{key:"_setEventListeners",value:function(){var e=this;this._likeButton.addEventListener("click",(function(){e._handleLikeBtnClick()})),this._btnRemoveCard.addEventListener("click",(function(){e._handleTrashBtnClick()})),this.maskGroupImg.addEventListener("click",(function(){e._handleCardClick({name:e._name,link:e._link})}))}},{key:"_handleLikeBtnClick",value:function(){this._likeButton.classList.toggle("element__like_active")}},{key:"_handleTrashBtnClick",value:function(){this._element.remove(),this._element=null}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),h={formSelector:".form",inputSelector:".form__input",submitButtonSelector:".form__bottom-submit",inactiveButtonClass:"form__bottom-submit_status_inactive",inputErrorClass:"form__input_type_error",errorClass:"form__input-error_active"};function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var b=function(){function e(t,n){var r=t.data,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._functionRender=o,this._container=n}var t,n;return t=e,(n=[{key:"renderItems",value:function(){this._renderedItems.forEach(this._functionRender.bind(this))}},{key:"addItem",value:function(e){this._container.prepend(e)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popupElement=t,this._handleEscCloseBinded=this._handleEscClose.bind(this)}var t,n;return t=e,(n=[{key:"open",value:function(){this._popupElement.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscCloseBinded)}},{key:"close",value:function(){this._popupElement.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscCloseBinded)}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._popupElement.addEventListener("mousedown",(function(t){(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close"))&&e.close()}))}}])&&k(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(){return S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},S.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=L(e)););return e}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function C(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=L(r);if(o){var n=L(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return C(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=i.call(this,e))._popupPhotoTitle=document.querySelector(".popup__caption"),t._popupPhotoImg=document.querySelector(".popup__img"),t}return t=u,(n=[{key:"open",value:function(e){var t=e.name,n=e.link;this._popupPhotoImg.src=n,this._popupPhotoImg.alt=t,this._popupPhotoTitle.textContent=t,S(L(u.prototype),"open",this).call(this)}}])&&w(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(g);function I(e){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},I(e)}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(){return B="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=R(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},B.apply(this,arguments)}function R(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=V(e)););return e}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function x(e,t){if(t&&("object"===I(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=V(r);if(o){var n=V(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,e))._popupElement=e,n._handleFormSubmit=t,n._formElement=n._popupElement.querySelector(".form"),n._formInputList=Array.from(n._formElement.querySelectorAll(".form__input")),n}return t=u,(n=[{key:"_getInputValues",value:function(){var e=this;return this._formValues={},this._formInputList.forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"setEventListeners",value:function(){var e=this;B(V(u.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e._handleFormSubmit(e._getInputValues())}))}},{key:"close",value:function(){B(V(u.prototype),"close",this).call(this),this._formElement.reset()}}])&&q(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(g);function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var N=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=t,this._userInfo=n}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){var e={};return e.name=this._userName.textContent,e.info=this._userInfo.textContent,e}},{key:"setUserInfo",value:function(e,t){this._userName.textContent=e,this._userInfo.textContent=t}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),A=new d(h,l),U=new d(h,i);function F(e,t){return new _({name:e,link:t},H,"#card_template").generateCard()}A.enableValidation(),U.enableValidation();var z=new b({data:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:function(e){var t=F(e.name,e.link);z.addItem(t)}},o);z.renderItems();var M=new P(c);function H(e,t){M.open(e,t)}M.setEventListeners();var J=new D(r,(function(e){var t=e.name,n=e.about;K.setUserInfo(t,n),J.close()}));J.setEventListeners(),n.addEventListener("click",(function(){U.resetVadlidation();var e=K.getUserInfo(),t=e.name,n=e.info;u.value=t,a.value=n,U.toggleButtonState(),J.open()}));var K=new N(e,t),Q=new D(s,(function(e){var t,n;n=F((t=e).place,t.url),z.addItem(n),Q.close()}));Q.setEventListeners(),f.addEventListener("click",(function(){A.resetVadlidation(),Q.open(),A.toggleButtonState()}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxLQUFNc0UsRUFBWSxFQUFaQSxNQUNyQ0MsRUFBWUMsWUFBWXhFLEVBQU1zRSxHQUM5QkQsRUFBaUJsQyxPQUNwQixJQUdEa0MsRUFBaUJELG9CQUtqQjVILEVBQWtCbUIsaUJBQWlCLFNBQVMsV0FDeENnRyxFQUFvQmMsbUJBQ3BCLE1BQXVCRixFQUFZRyxjQUEzQjFFLEVBQVIsRUFBUUEsS0FBTXlELEVBQWQsRUFBY0EsS0FDZDdHLEVBQVVtRyxNQUFRL0MsRUFDbEJuRCxFQUFTa0csTUFBUVUsRUFDakJFLEVBQW9CbEcsb0JBQ3BCNEcsRUFBaUJGLE1BQ3BCLElBS0QsSUFBTUksRUFBYyxJQUFJcEIsRUFBUy9HLEVBQWFHLEdBV3hDb0ksRUFBa0IsSUFBSWxDLEVBQWMzRixHQUxqQixTQUFDOEgsR0FTMUIsTUFDVUMsSUFBY2pCLEdBRHhCLEVBUjJCZ0IsR0FRT0UsTUFBYyxFQUFQQyxLQUVyQ2hCLEVBQVNDLFFBQVFhLEdBVGpCRixFQUFnQnhDLE9BQ25CLElBSUR3QyxFQUFnQlAsb0JBUWhCbkgsRUFBbUJVLGlCQUFpQixTQUFTLFdBQ3pDK0YsRUFBdUJlLG1CQUN2QkUsRUFBZ0JSLE9BQ2hCVCxFQUF1QmpHLG1CQUMxQixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vYmwvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL2JsLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9ibC8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vYmwvLi9zcmMvdXRpbHMvY29uZmlnLmpzIiwid2VicGFjazovL2JsLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly9ibC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL2JsLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vYmwvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL2JsLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vYmwvLi9zcmMvcGFnZXMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFt7XG4gICAgICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9hcmtoeXouanBnJ1xuICAgIH0sXG4gICAge1xuICAgICAgICBuYW1lOiAn0KfQtdC70Y/QsdC40L3RgdC60LDRjyDQvtCx0LvQsNGB0YLRjCcsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9CY0LLQsNC90L7QstC+JyxcbiAgICAgICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9pdmFub3ZvLmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxuICAgICAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2thbWNoYXRrYS5qcGcnXG4gICAgfSxcbiAgICB7XG4gICAgICAgIG5hbWU6ICfQpdC+0LvQvNC+0LPQvtGA0YHQutC40Lkg0YDQsNC50L7QvScsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcbiAgICB9LFxuICAgIHtcbiAgICAgICAgbmFtZTogJ9CR0LDQudC60LDQuycsXG4gICAgICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYmFpa2FsLmpwZydcbiAgICB9XG5dO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fbmFtZScpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hYm91dCcpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVFZGl0QnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgcHJvZmlsZVBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX3R5cGVfcHJvZmlsZScpO1xuZXhwb3J0IGNvbnN0IGVsZW1lbnRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnQtbGlzdCcpO1xuXG5leHBvcnQgY29uc3QgcHJvZmlsZUZvcm0gPSBwcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBwcm9maWxlUG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfbmFtZScpO1xuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gcHJvZmlsZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX2Fib3V0Jyk7XG5leHBvcnQgY29uc3QgbmV3UGxhY2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3BsYWNlJyk7XG5leHBvcnQgY29uc3QgZm9ybU5ld0VsZW1lbnQgPSBuZXdQbGFjZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtJyk7XG5cbmV4cG9ydCBjb25zdCBwbGFjZU5hbWUgPSBuZXdQbGFjZVBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5mb3JtX19pbnB1dF90eXBlX25hbWUnKTtcbmV4cG9ydCBjb25zdCBwbGFjZVVybCA9IG5ld1BsYWNlUG9wdXAucXVlcnlTZWxlY3RvcignLmZvcm1fX2lucHV0X3R5cGVfYWJvdXQnKTtcblxuZXhwb3J0IGNvbnN0IHBpY3R1cmVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF90eXBlX3BpYycpO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVQbGFjZUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19wbGFjZS1idXR0b24nKTtcbiIsImV4cG9ydCBjbGFzcyBGb3JtVmFsaWRhdG9yIHsgLyoqIEBtb2R1bGUg0J7RgtCy0LXRh9Cw0LXRgiDQt9CwINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLKi9cbiAgICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbGVtZW50KSB7XG4gICAgICAgIHRoaXMuX2NvbmZpZyA9IGNvbmZpZztcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5pbnB1dFNlbGVjdG9yKSk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSBmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3Rvcik7XG4gICAgfTtcblxuICAgIF9pc1ZhbGlkaXR5KGlucHV0RWxlbWVudCkgeyAvL9C/0YDRj9GH0LXRgiDQuNC70Lgg0L/QvtC60LDQt9GL0LLQsNC10YIg0L7RiNC40LHQutC4INCyINC30LDQstC40YHQuNC80L7RgdGC0Lgg0L7RgiDQstCw0LvQuNC00L3QvtGB0YLQuCDQv9C+0LvQtdC5INCy0YvQt9GL0LLQsNC10YIg0YHQvtC+0YLQsi4g0YTRg9C90LrRhtC40Y5cbiAgICAgICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHsgLy8g0L/QvtC60LDQt9GL0LLQsNC10YIg0L7RiNC40LHQutC4XG4gICAgICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgKTtcbiAgICAgICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICAgICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnLmVycm9yQ2xhc3MpO1xuICAgIH07XG5cbiAgICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7IC8v0L/RgNGP0YfQtdGCINC+0YjQuNCx0LrQuFxuICAgICAgICBjb25zdCBlcnJvckVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbnB1dEVycm9yQ2xhc3MpO1xuICAgICAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9jb25maWcuZXJyb3JDbGFzcyk7XG4gICAgICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICAgIH07XG5cbiAgICB0b2dnbGVCdXR0b25TdGF0ZSgpIHsgLy/RgNC10LPRg9C70LjRgNGD0LXRgiDRgdC+0YHRgtC+0Y/QvdC40LUg0LrQvdC+0L/QutC4XG4gICAgICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQoKSkge1xuICAgICAgICAgICAgdGhpcy5fc2V0RGlzYWJsZWRCdXR0b24oKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3NldEVuYWJsZWRCdXR0b24oKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgX3NldERpc2FibGVkQnV0dG9uKCkgeyAvL9GA0LXQs9GD0LvQuNGA0YPQtdGCINGB0L7RgdGC0L7Rj9C90LjQtSDQutC90L7Qv9C60Lggb2ZmXG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9jb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIF9zZXRFbmFibGVkQnV0dG9uKCkgeyAvL9GA0LXQs9GD0LvQuNGA0YPQtdGCINGB0L7RgdGC0L7Rj9C90LjQtSDQutC90L7Qv9C60Lggb25cbiAgICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKVxuICAgICAgICB0aGlzLl9idXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XG4gICAgfVxuXG4gICAgcmVzZXRWYWRsaWRhdGlvbiA9ICgpID0+IHsgLy/RgdCx0YDQsNGB0YvQstCw0LXRgiDRgdC+0YHRgtC+0Y/QvdC40Y8g0L7RiNC40LHQvtC6LCDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9C+0LJcbiAgICAgICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0SXRlbSkgPT4gdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRJdGVtKSk7XG4gICAgfVxuXG4gICAgX3NldEV2ZW50TGlzdGVuZXJzID0gKCkgPT4geyAvLyDRg9GB0YLQsNC90LDQstC70LjQstCy0LDQtdGCINGB0LvRg9GI0LDRgtC10LvQuFxuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgICAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1ZhbGlkaXR5KGlucHV0RWxlbWVudCk7XG4gICAgICAgICAgICAgICAgdGhpcy50b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH07XG5cbiAgICBlbmFibGVWYWxpZGF0aW9uKCkgeyAvLyDQstC60LvRjtGH0LDQtdGCINCy0LDQu9C40LTQsNGG0LjRjiDRhNC+0YDQvNGLXG4gICAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgfTtcbn07IiwiZXhwb3J0IGNsYXNzIENhcmQge1xuICAgIGNvbnN0cnVjdG9yKGl0ZW0sIGhhbmRsZUNhcmRDbGljaywgY2FyZHRlbXBsYXRlKSB7IC8qKiBAbW9kdWxlINCe0YLQstC10YfQsNC10YIg0LfQsCDQs9C10L3QtdGA0LDRhtC40Y4g0LrQsNGA0YIqL1xuICAgICAgICB0aGlzLl9saW5rID0gaXRlbS5saW5rO1xuICAgICAgICB0aGlzLl9uYW1lID0gaXRlbS5uYW1lO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XG4gICAgICAgIHRoaXMuX2NhcmRUZW1wbGF0ZSA9IGNhcmR0ZW1wbGF0ZTtcbiAgICB9XG4gICAgX2dldFRlbXBsYXRlKCkge1xuICAgICAgICBjb25zdCBjYXJkTmV3RWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFRlbXBsYXRlKS5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKS5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICAgIHJldHVybiBjYXJkTmV3RWxlbWVudFxuICAgIH1cbiAgICBnZW5lcmF0ZUNhcmQoKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xuICAgICAgICB0aGlzLm1hc2tHcm91cEltZyA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX21hc2stZ3JvdXAnKTtcbiAgICAgICAgdGhpcy5tYXNrR3JvdXBOYW1lID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fcGxhY2UtbmFtZScpO1xuICAgICAgICB0aGlzLl9saWtlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fbGlrZScpO1xuICAgICAgICB0aGlzLl9idG5SZW1vdmVDYXJkID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYnRuLXJlbW92ZScpO1xuICAgICAgICB0aGlzLm1hc2tHcm91cEltZy5zcmMgPSB0aGlzLl9saW5rO1xuICAgICAgICB0aGlzLm1hc2tHcm91cE5hbWUudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLm1hc2tHcm91cEltZy5hbHQgPSB0aGlzLl9uYW1lO1xuICAgICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpXG4gICAgICAgIHJldHVybiB0aGlzLl9lbGVtZW50XG4gICAgfVxuICAgIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAgICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUxpa2VCdG5DbGljaygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5fYnRuUmVtb3ZlQ2FyZC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlVHJhc2hCdG5DbGljaygpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5tYXNrR3JvdXBJbWcuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayh7IG5hbWU6IHRoaXMuX25hbWUsIGxpbms6IHRoaXMuX2xpbmsgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgfVxuICAgIF9oYW5kbGVMaWtlQnRuQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnZWxlbWVudF9fbGlrZV9hY3RpdmUnKTtcbiAgICB9XG4gICAgX2hhbmRsZVRyYXNoQnRuQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuX2VsZW1lbnQgPSBudWxsO1xuICAgIH1cblxufVxuIiwiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgICBmb3JtU2VsZWN0b3I6ICcuZm9ybScsXG4gICAgaW5wdXRTZWxlY3RvcjogJy5mb3JtX19pbnB1dCcsXG4gICAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcuZm9ybV9fYm90dG9tLXN1Ym1pdCcsXG4gICAgaW5hY3RpdmVCdXR0b25DbGFzczogJ2Zvcm1fX2JvdHRvbS1zdWJtaXRfc3RhdHVzX2luYWN0aXZlJyxcbiAgICBpbnB1dEVycm9yQ2xhc3M6ICdmb3JtX19pbnB1dF90eXBlX2Vycm9yJyxcbiAgICBlcnJvckNsYXNzOiAnZm9ybV9faW5wdXQtZXJyb3JfYWN0aXZlJyxcbn07XG4iLCJleHBvcnQgY2xhc3MgU2VjdGlvbiB7IC8qKiBAbW9kdWxlINC60LvQsNGB0YEg0L7RgtGA0LjRgdC+0LLQutC4INC80LDRgdGB0LjQstCwINC60LDRgNGC0L7Rh9C10LouICAqL1xuICAgIGNvbnN0cnVjdG9yKHsgZGF0YSwgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fcmVuZGVyZWRJdGVtcyA9IGRhdGE7XG4gICAgICAgIHRoaXMuX2Z1bmN0aW9uUmVuZGVyID0gcmVuZGVyZXI7XG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xuICAgIH1cblxuICAgIHJlbmRlckl0ZW1zKCkge1xuICAgICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2godGhpcy5fZnVuY3Rpb25SZW5kZXIuYmluZCh0aGlzKSk7XG4gICAgfVxuICAgIGFkZEl0ZW0oZWxlbWVudCkge1xuICAgICAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcbiAgICB9XG59IiwiZXhwb3J0IGNsYXNzIFBvcHVwIHtcbiAgICBjb25zdHJ1Y3Rvcihwb3B1cEVsZW1lbnQpIHtcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBFbGVtZW50O1xuICAgICAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZUJpbmRlZCA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gICAgfVxuICAgIG9wZW4oKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQmluZGVkKTtcbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlQmluZGVkKTtcbiAgICB9XG4gICAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgICAgICBpZiAoZXZ0LmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzZXRFdmVudExpc3RlbmVycygpIHtcblxuICAgICAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xuICAgICAgICAgICAgaWYgKGV2dC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fCAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwX19jbG9zZScpKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG59XG4iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gJy4vUG9wdXAuanMnXG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHsgLyoqIEBtb2R1bGUg0J7RgtCy0LXRh9Cw0LXRgiDQt9CwINC+0YLQutGA0YvRgtC40LUg0LrQsNGA0YLQuNC90LrQuCovXG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwRWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG9UaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbicpO1xuICAgICAgICB0aGlzLl9wb3B1cFBob3RvSW1nID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbiAgICB9XG5cbiAgICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgICAgIHRoaXMuX3BvcHVwUGhvdG9JbWcuc3JjID0gbGluaztcbiAgICAgICAgdGhpcy5fcG9wdXBQaG90b0ltZy5hbHQgPSBuYW1lO1xuICAgICAgICB0aGlzLl9wb3B1cFBob3RvVGl0bGUudGV4dENvbnRlbnQgPSBuYW1lO1xuXG4gICAgICAgIHN1cGVyLm9wZW4oKTtcbiAgICB9XG59IiwiaW1wb3J0IHsgUG9wdXAgfSBmcm9tIFwiLi9Qb3B1cC5qc1wiXG5cbmV4cG9ydCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAgeyAvKiogQG1vZHVsZSDQntGC0LLQtdGH0LDQtdGCINC30LAg0L7RgtC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0L7QsiDRhNC+0YDQvCovXG4gICAgY29uc3RydWN0b3IocG9wdXBFbGVtZW50LCBoYW5kbGVGb3JtU3VibWl0KSB7XG4gICAgICAgIHN1cGVyKHBvcHVwRWxlbWVudClcbiAgICAgICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gcG9wdXBFbGVtZW50O1xuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcbiAgICAgICAgdGhpcy5fZm9ybUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0nKTtcbiAgICAgICAgdGhpcy5fZm9ybUlucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmZvcm1fX2lucHV0JykpO1xuXG4gICAgfVxuICAgIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xuXG4gICAgICAgIHRoaXMuX2Zvcm1JbnB1dExpc3QuZm9yRWFjaChpbnB1dCA9PiB7XG4gICAgICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyDQstC+0LfQstGA0LDRidCw0LXQvCDQvtCx0YrQtdC60YIg0LfQvdCw0YfQtdC90LjQuVxuICAgICAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcbiAgICB9XG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcbiAgICAgICAgfSlcblxuXG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICBzdXBlci5jbG9zZSgpO1xuICAgICAgICB0aGlzLl9mb3JtRWxlbWVudC5yZXNldCgpO1xuICAgIH1cbn0iLCJleHBvcnQgY2xhc3MgVXNlckluZm8geyAvKiogQG1vZHVsZSDQn9C10YDQtdC00LDQtdGCINC40L3RhNC+0YDQvNCw0YbQuNGOINC90LAg0YHRgtGA0LDQvdC40YbRgyAqL1xuICAgIGNvbnN0cnVjdG9yKHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJJbmZvU2VsZWN0b3IpIHtcbiAgICAgICAgdGhpcy5fdXNlck5hbWUgPSB1c2VyTmFtZVNlbGVjdG9yO1xuICAgICAgICB0aGlzLl91c2VySW5mbyA9IHVzZXJJbmZvU2VsZWN0b3I7XG4gICAgfVxuXG4gICAgLy/Qn9GD0LHQu9C40YfQvdGL0Lkg0LzQtdGC0L7QtCDQstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLCDQuNGB0L/QvtC70YzQt9GD0LXRgtGB0Y8g0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0L/QvtC/0LDQv9CwXG4gICAgZ2V0VXNlckluZm8oKSB7XG4gICAgICAgIGNvbnN0IHVzZXJEYXRhID0ge307XG5cbiAgICAgICAgdXNlckRhdGEubmFtZSA9IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50O1xuICAgICAgICB1c2VyRGF0YS5pbmZvID0gdGhpcy5fdXNlckluZm8udGV4dENvbnRlbnQ7XG5cbiAgICAgICAgcmV0dXJuIHVzZXJEYXRhO1xuICAgIH1cblxuICAgIC8v0J/Rg9Cx0LvQuNGH0L3Ri9C5INC80LXRgtC+0LQg0L/RgNC40L3QuNC80LDQtdGCINC90L7QstGL0LUg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQuCDQtNC+0LHQsNCy0LvRj9C10YIg0LjRhSDQvdCwINGB0YLRgNCw0L3QuNGG0YNcbiAgICBzZXRVc2VySW5mbyhuYW1lLCBpbmZvKSB7XG4gICAgICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcbiAgICAgICAgdGhpcy5fdXNlckluZm8udGV4dENvbnRlbnQgPSBpbmZvO1xuICAgIH1cbn0iLCJpbXBvcnQgJy4vaW5kZXguY3NzJztcbmltcG9ydCB7XG4gICAgaW5pdGlhbENhcmRzLFxuICAgIHByb2ZpbGVOYW1lLFxuICAgIHByb2ZpbGVBYm91dCxcbiAgICBwcm9maWxlRWRpdEJ1dHRvbixcbiAgICBwcm9maWxlUG9wdXAsXG4gICAgZWxlbWVudExpc3QsXG4gICAgcHJvZmlsZUZvcm0sXG4gICAgbmFtZUlucHV0LFxuICAgIGpvYklucHV0LFxuICAgIG5ld1BsYWNlUG9wdXAsXG4gICAgZm9ybU5ld0VsZW1lbnQsXG4gICAgcGxhY2VOYW1lLFxuICAgIHBsYWNlVXJsLFxuICAgIHBpY3R1cmVQb3B1cCxcbiAgICBwcm9maWxlUGxhY2VCdXR0b25cbn0gZnJvbSAnLi4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyc7XG5pbXBvcnQgeyBDYXJkIH0gZnJvbSAnLi4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCB7IGNvbmZpZyB9IGZyb20gJy4uL3V0aWxzL2NvbmZpZy5qcyc7XG5pbXBvcnQgeyBTZWN0aW9uIH0gZnJvbSAnLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgeyBQb3B1cFdpdGhGb3JtIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzJztcbmltcG9ydCB7IFVzZXJJbmZvIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gLSDQt9Cw0L/Rg9GB0LrQsNC10YIg0LLQsNC70LjQtNCw0YbQuNGOLlxuICovXG5jb25zdCB2YWxpZGF0ZUZvcm1OZXdFbGVtZW50ID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBmb3JtTmV3RWxlbWVudCk7XG5jb25zdCB2YWxpZGF0ZVByb2ZpbGVGb3JtID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBwcm9maWxlRm9ybSk7XG5cblxuXG52YWxpZGF0ZUZvcm1OZXdFbGVtZW50LmVuYWJsZVZhbGlkYXRpb24oKTtcbnZhbGlkYXRlUHJvZmlsZUZvcm0uZW5hYmxlVmFsaWRhdGlvbigpO1xuXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIC0g0YTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNGO0YnQsNGPINCz0L7RgtC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YMg0YEg0LTQsNC90L3Ri9C80LguXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNhcmRDbGFzcyhuYW1lLCBsaW5rKSB7XG4gICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKHtcbiAgICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgICBsaW5rXG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZUNhcmRDbGljaywgJyNjYXJkX3RlbXBsYXRlJyk7XG4gICAgY29uc3QgY2FyZE5ld0VsZW1lbnQgPSBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xuICAgIHJldHVybiBjYXJkTmV3RWxlbWVudFxufVxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAtINC60LvQsNGB0YEg0L7RgtGA0LjRgdC+0LLQutC4INC80LDRgdGB0LjQstCwINC60LDRgNGC0L7Rh9C10LouXG4gKi9cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oe1xuICAgICAgICBkYXRhOiBpbml0aWFsQ2FyZHMsXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZWxlbWVudCA9IGNyZWF0ZUNhcmRDbGFzcyhpdGVtLm5hbWUsIGl0ZW0ubGluayk7XG4gICAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGVsZW1lbnQpO1xuXG4gICAgICAgIH0sXG4gICAgfSxcbiAgICBlbGVtZW50TGlzdFxuKTtcbi8qKlxuICogQGRlc2NyaXB0aW9uIC0g0YTRg9C90LrRhtC40Y8g0YHQvtC30LTQsNGO0YnQsNGPINCz0L7RgtC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YMg0YEg0LTQsNC90L3Ri9C80LguXG4gKi9cbmNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XG5cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAtINC60LvQsNGB0YEg0L/QvtC/0LDQv9CwINC60LDRgNGC0LjQvdC60LguXG4gKi9cbmNvbnN0IHBvcHVwUGljZSA9IG5ldyBQb3B1cFdpdGhJbWFnZShwaWN0dXJlUG9wdXApXG5wb3B1cFBpY2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKG5hbWUsIGxpbmspIHtcbiAgICBwb3B1cFBpY2Uub3BlbihuYW1lLCBsaW5rKTtcbn07XG5cblxuXG4vKipcbiAqIEBkZXNjcmlwdGlvbiAtINC/0L7Qv9Cw0L8g0YDQtdC00LDQutGC0LjRgNCy0LDQvdC40Y8g0L/RgNC+0YTQuNC70Y8uXG4gKi9cbmNvbnN0IGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0ID0gKHsgbmFtZSwgYWJvdXQgfSkgPT4ge1xuICAgIHByb2ZpbGVJbmZvLnNldFVzZXJJbmZvKG5hbWUsIGFib3V0KTtcbiAgICBwb3B1cFByb2ZpbGVGb3JtLmNsb3NlKCk7XG59O1xuXG5jb25zdCBwb3B1cFByb2ZpbGVGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0ocHJvZmlsZVBvcHVwLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7XG5wb3B1cFByb2ZpbGVGb3JtLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIC0g0YHQu9GD0YjQsNGC0LXQu9GMLCDQutC+0YLQvtGA0YvQuSDRgdCx0YDQsNGB0YvQstCw0LXRgiDQstCw0LvQuNC00LDRhtC40Y4g0YTQvtGA0LzRiyDQv9GA0L7RhNC40LvRjyDQuCDQv9C10YDQtdC90L7RgdC40YIg0LfQvdCw0YfQtdC90LjRjyDQsiBpbnB1dHNcbiAqL1xucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVQcm9maWxlRm9ybS5yZXNldFZhZGxpZGF0aW9uKCk7XG4gICAgY29uc3QgeyBuYW1lLCBpbmZvIH0gPSBwcm9maWxlSW5mby5nZXRVc2VySW5mbygpO1xuICAgIG5hbWVJbnB1dC52YWx1ZSA9IG5hbWU7XG4gICAgam9iSW5wdXQudmFsdWUgPSBpbmZvO1xuICAgIHZhbGlkYXRlUHJvZmlsZUZvcm0udG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICBwb3B1cFByb2ZpbGVGb3JtLm9wZW4oKVxufSk7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIC0g0YPQv9GA0LDQstC70LXQvdC40LUg0L7RgtC+0LHRgNCw0LbQtdC90LjQtdC8INC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtSDQvdCwINGB0YLRgNCw0L3QuNGG0LUuXG4gKi9cbmNvbnN0IHByb2ZpbGVJbmZvID0gbmV3IFVzZXJJbmZvKHByb2ZpbGVOYW1lLCBwcm9maWxlQWJvdXQpO1xuXG5cbi8qKlxuICogQGRlc2NyaXB0aW9uIC0g0LrQvtC0INGB0L7Qt9C00LDQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4INC4INGA0LDQsdC+0YLRiyDQv9C+0L/QsNC/0LAuXG4gKi9cbmNvbnN0IGhhbmRsZUFkZEVsbUZvcm0gPSAoZm9ybURhdGEpID0+IHtcbiAgICBzdWJtaXRGb3JtSGFuZGxlclBsYWNlKGZvcm1EYXRhKTtcbiAgICBwb3B1cE5ld0VsZW1lbnQuY2xvc2UoKVxufVxuXG5jb25zdCBwb3B1cE5ld0VsZW1lbnQgPSBuZXcgUG9wdXBXaXRoRm9ybShuZXdQbGFjZVBvcHVwLCBoYW5kbGVBZGRFbG1Gb3JtKTtcblxucG9wdXBOZXdFbGVtZW50LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIHN1Ym1pdEZvcm1IYW5kbGVyUGxhY2UoeyBwbGFjZSwgdXJsIH0pIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNyZWF0ZUNhcmRDbGFzcyhwbGFjZSwgdXJsKTtcbiAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbn1cblxuXG5wcm9maWxlUGxhY2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgdmFsaWRhdGVGb3JtTmV3RWxlbWVudC5yZXNldFZhZGxpZGF0aW9uKCk7XG4gICAgcG9wdXBOZXdFbGVtZW50Lm9wZW4oKVxuICAgIHZhbGlkYXRlRm9ybU5ld0VsZW1lbnQudG9nZ2xlQnV0dG9uU3RhdGUoKTtcbn0pXG4iXSwibmFtZXMiOlsicHJvZmlsZU5hbWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwcm9maWxlQWJvdXQiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVQb3B1cCIsImVsZW1lbnRMaXN0IiwicHJvZmlsZUZvcm0iLCJuYW1lSW5wdXQiLCJqb2JJbnB1dCIsIm5ld1BsYWNlUG9wdXAiLCJmb3JtTmV3RWxlbWVudCIsInBpY3R1cmVQb3B1cCIsInByb2ZpbGVQbGFjZUJ1dHRvbiIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9pbnB1dExpc3QiLCJmb3JFYWNoIiwiaW5wdXRJdGVtIiwiX2hpZGVJbnB1dEVycm9yIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJpbnB1dEVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiX2lzVmFsaWRpdHkiLCJ0aGlzIiwiX2NvbmZpZyIsIl9mb3JtRWxlbWVudCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dFNlbGVjdG9yIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsInZhbGlkaXR5IiwidmFsaWQiLCJfc2hvd0lucHV0RXJyb3IiLCJzb21lIiwiZXJyb3JFbGVtZW50IiwiaWQiLCJjbGFzc0xpc3QiLCJhZGQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ0ZXh0Q29udGVudCIsInZhbGlkYXRpb25NZXNzYWdlIiwiZXJyb3JDbGFzcyIsInJlbW92ZSIsIl9oYXNJbnZhbGlkSW5wdXQiLCJfc2V0RGlzYWJsZWRCdXR0b24iLCJfc2V0RW5hYmxlZEJ1dHRvbiIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJkaXNhYmxlZCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkNhcmQiLCJpdGVtIiwiaGFuZGxlQ2FyZENsaWNrIiwiY2FyZHRlbXBsYXRlIiwiX2xpbmsiLCJsaW5rIiwiX25hbWUiLCJuYW1lIiwiX2hhbmRsZUNhcmRDbGljayIsIl9jYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJtYXNrR3JvdXBJbWciLCJtYXNrR3JvdXBOYW1lIiwiX2xpa2VCdXR0b24iLCJfYnRuUmVtb3ZlQ2FyZCIsInNyYyIsImFsdCIsIl9oYW5kbGVMaWtlQnRuQ2xpY2siLCJfaGFuZGxlVHJhc2hCdG5DbGljayIsInRvZ2dsZSIsImZvcm1TZWxlY3RvciIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsImRhdGEiLCJyZW5kZXJlciIsIl9yZW5kZXJlZEl0ZW1zIiwiX2Z1bmN0aW9uUmVuZGVyIiwiX2NvbnRhaW5lciIsImJpbmQiLCJlbGVtZW50IiwicHJlcGVuZCIsIlBvcHVwIiwicG9wdXBFbGVtZW50IiwiX3BvcHVwRWxlbWVudCIsIl9oYW5kbGVFc2NDbG9zZUJpbmRlZCIsIl9oYW5kbGVFc2NDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJjbG9zZSIsInRhcmdldCIsImNvbnRhaW5zIiwiUG9wdXBXaXRoSW1hZ2UiLCJfcG9wdXBQaG90b1RpdGxlIiwiX3BvcHVwUGhvdG9JbWciLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2Zvcm1JbnB1dExpc3QiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwidmFsdWUiLCJwcmV2ZW50RGVmYXVsdCIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiVXNlckluZm8iLCJ1c2VyTmFtZVNlbGVjdG9yIiwidXNlckluZm9TZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VySW5mbyIsInVzZXJEYXRhIiwiaW5mbyIsInZhbGlkYXRlRm9ybU5ld0VsZW1lbnQiLCJ2YWxpZGF0ZVByb2ZpbGVGb3JtIiwiY3JlYXRlQ2FyZENsYXNzIiwiZ2VuZXJhdGVDYXJkIiwiZW5hYmxlVmFsaWRhdGlvbiIsImNhcmRMaXN0IiwiYWRkSXRlbSIsInJlbmRlckl0ZW1zIiwicG9wdXBQaWNlIiwib3BlbiIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9wdXBQcm9maWxlRm9ybSIsImFib3V0IiwicHJvZmlsZUluZm8iLCJzZXRVc2VySW5mbyIsInJlc2V0VmFkbGlkYXRpb24iLCJnZXRVc2VySW5mbyIsInBvcHVwTmV3RWxlbWVudCIsImZvcm1EYXRhIiwiY2FyZEVsZW1lbnQiLCJwbGFjZSIsInVybCJdLCJzb3VyY2VSb290IjoiIn0=